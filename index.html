<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>For You ‚ù§Ô∏è</title>

  <style>
    :root{
      --bg1:#0b0b14;
      --bg2:#1a0b22;
      --card: rgba(255,255,255,.08);
      --card2: rgba(255,255,255,.12);
      --text:#f7f7fb;
      --muted: rgba(255,255,255,.75);
      --pink:#ff4d8d;
      --pink2:#ff8fb6;
      --glow: 0 0 24px rgba(255,77,141,.35);
      --radius: 24px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: radial-gradient(1000px 700px at 20% 10%, rgba(255,77,141,.18), transparent 60%),
                  radial-gradient(900px 700px at 80% 20%, rgba(130,80,255,.20), transparent 60%),
                  linear-gradient(180deg, var(--bg1), var(--bg2));
      min-height:100vh;
      overflow-x:hidden;
    }

    /* Background hearts */
    #heartsCanvas{
      position:fixed;
      inset:0;
      z-index:-1;
      opacity:.85;
    }

    #confetti{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index: 30;
      display:none;
    }
    #confetti.show{display:block;}

    .toast{
      position: fixed;
      left: 50%;
      bottom: 22px;
      transform: translateX(-50%);
      background: rgba(20,20,30,.92);
      border: 1px solid rgba(255,255,255,.14);
      color: rgba(255,255,255,.92);
      padding: 12px 14px;
      border-radius: 999px;
      box-shadow: 0 20px 70px rgba(0,0,0,.45);
      display:none;
      z-index: 40;
      max-width: 92vw;
      will-change: transform;
    }
    .toast.show{display:block;}

    .wrap{
      width:min(1100px, 92vw);
      margin:0 auto;
      padding:28px 0 70px;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      padding:14px 18px;
      border-radius:999px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.10);
      backdrop-filter: blur(10px);
      box-shadow: 0 12px 40px rgba(0,0,0,.25);
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:10px;
      font-weight:800;
      letter-spacing:.4px;
    }
    .dot{
      width:10px;height:10px;border-radius:999px;
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      box-shadow: var(--glow);
    }
    .mini{
      color:var(--muted);
      font-size:.95rem;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width:52vw;
    }

    .hero{
      margin-top:22px;
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:18px;
    }
    @media (max-width: 900px){
      .hero{ grid-template-columns: 1fr; }
      .mini{ max-width: 70vw; }
    }

    .card{
      background: var(--card);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: var(--radius);
      padding:22px;
      backdrop-filter: blur(10px);
      box-shadow: 0 18px 60px rgba(0,0,0,.35);
    }
    .heroTitle{
      font-size: clamp(2.1rem, 4vw, 3.3rem);
      line-height:1.05;
      margin:0 0 12px;
      letter-spacing:-.8px;
      text-shadow: 0 0 30px rgba(255,77,141,.22);
    }
    .shine{
      background: linear-gradient(90deg, #fff, #ffd1e1, #fff);
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      filter: drop-shadow(0 0 14px rgba(255,255,255,.15));
    }
    .desc{
      margin:0 0 16px;
      color:var(--muted);
      font-size:1.05rem;
      line-height:1.65;
      position:relative;
    }

    .btn{
      border:none;
      border-radius: 999px;
      padding: 12px 18px;
      font-weight:800;
      cursor:pointer;
      transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
      user-select:none;
      white-space:nowrap;
    }
    .btn:active{transform: scale(.98)}
    .btnPrimary{
      background: linear-gradient(135deg, var(--pink), #ff2f7b);
      color:#fff;
      box-shadow: 0 14px 30px rgba(255,77,141,.22), var(--glow);
    }
    .btnPrimary:hover{
      transform: translateY(-1px);
      box-shadow: 0 18px 44px rgba(255,77,141,.28), var(--glow);
    }
    .btnGhost{
      background: rgba(255,255,255,.10);
      color: #fff;
      border: 1px solid rgba(255,255,255,.14);
    }
    .btnGhost:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.14);
    }

    .noZone{
      position:relative;
      min-height: 56px;
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }

    .sideCard{
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .quote{
      margin:0;
      font-size:1.05rem;
      line-height:1.55;
      color: rgba(255,255,255,.92);
    }
    .quote small{
      display:block;
      margin-top:10px;
      color:var(--muted);
    }

    .badgeRow{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-top:2px;
    }
    .badge{
      font-size:.9rem;
      padding:8px 10px;
      border-radius:999px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.12);
      color: rgba(255,255,255,.88);
    }

    .sectionTitle{
      margin:26px 0 12px;
      font-size:1.35rem;
      letter-spacing:-.2px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .hint{
      color:var(--muted);
      font-size:.92rem;
    }

    /* Gallery */
    .galleryWrap{
      background: var(--card);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: var(--radius);
      padding: 16px;
      backdrop-filter: blur(10px);
      box-shadow: 0 18px 60px rgba(0,0,0,.35);
    }
    .gallery{
      column-count: 3;
      column-gap: 12px;
    }
    @media (max-width: 900px){ .gallery{ column-count: 2; } }
    @media (max-width: 520px){ .gallery{ column-count: 1; } }

    .photo{
      width:100%;
      border-radius: 18px;
      margin: 0 0 12px;
      display:block;
      cursor:pointer;
      transition: transform .15s ease, filter .15s ease;
      filter: saturate(1.05) contrast(1.02);
      break-inside: avoid;
      box-shadow: 0 10px 26px rgba(0,0,0,.35);
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
    }
    .photo:hover{
      transform: translateY(-2px) scale(1.01);
      filter: saturate(1.12) contrast(1.05);
    }

    /* Lightbox */
    .lightbox{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.72);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 22px;
      z-index: 20;
    }
    .lightbox.open{display:flex;}
    .lbCard{
      width:min(980px, 96vw);
      border-radius: 22px;
      background: rgba(20,20,30,.92);
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: 0 30px 90px rgba(0,0,0,.6);
      overflow:hidden;
      position:relative;
    }
    .lbImg{
      width:100%;
      display:block;
      max-height: 78vh;
      object-fit: contain;
      background: rgba(0,0,0,.35);
    }
    .lbBar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 12px 14px;
      color: var(--muted);
      font-size:.95rem;
    }
    .lbBtns{display:flex; gap:8px;}
    .iconBtn{
      border:none;
      cursor:pointer;
      border-radius: 12px;
      padding: 10px 12px;
      background: rgba(255,255,255,.10);
      color:#fff;
      border: 1px solid rgba(255,255,255,.14);
      font-weight:800;
    }
    .iconBtn:hover{ background: rgba(255,255,255,.14); }

    /* Games grid (2 columns; we will show 4 cards) */
    .grid2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
    }
    @media (max-width: 900px){ .grid2{ grid-template-columns:1fr; } }

    .gameTitle{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin:0 0 10px;
      font-size:1.08rem;
      letter-spacing:-.2px;
    }
    .sub{
      color: var(--muted);
      font-size:.95rem;
      line-height:1.5;
      margin:0 0 12px;
    }

    /* Memory game */
    .memoryGrid{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
    }
    @media (max-width: 520px){ .memoryGrid{ grid-template-columns: repeat(3, 1fr);} }
    .mCard{
      aspect-ratio: 1 / 1;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.08);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size: 1.5rem;
      font-weight:900;
      cursor:pointer;
      user-select:none;
      box-shadow: 0 12px 25px rgba(0,0,0,.25);
      transition: transform .12s ease, background .12s ease;
      position:relative;
      overflow:hidden;
    }
    .mCard:hover{ transform: translateY(-1px); }
    .mCard.revealed, .mCard.matched{
      background: rgba(255,77,141,.18);
      border-color: rgba(255,77,141,.35);
      box-shadow: 0 16px 34px rgba(255,77,141,.12);
    }
    .mCard span{
      opacity:0;
      transform: scale(.9);
      transition: opacity .12s ease, transform .12s ease;
    }
    .mCard.revealed span, .mCard.matched span{
      opacity:1;
      transform: scale(1);
    }

    .row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      margin-top:10px;
    }
    .tiny{
      color: var(--muted);
      font-size:.9rem;
    }

    /* Quiz */
    .qBox{ display:flex; flex-direction:column; gap:10px; }
    .qQuestion{ font-weight:900; font-size:1.05rem; letter-spacing:-.2px; }
    .qOptions{ display:grid; grid-template-columns: 1fr; gap:8px; }
    .opt{
      text-align:left;
      padding: 12px 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.08);
      color:#fff;
      cursor:pointer;
      font-weight:800;
      transition: transform .12s ease, background .12s ease;
    }
    .opt:hover{ transform: translateY(-1px); background: rgba(255,255,255,.12); }
    .opt.correct{ background: rgba(86,255,163,.14); border-color: rgba(86,255,163,.25); }
    .opt.wrong{ background: rgba(255,86,122,.14); border-color: rgba(255,86,122,.25); }

    /* ADD: Intro overlay (cover) */
    .intro-overlay{
      position:fixed; inset:0; z-index:9999;
      display:grid; place-items:center;
      overflow:hidden;
      background: radial-gradient(1200px 600px at 20% 20%, rgba(255,84,160,.28), transparent 60%),
                  radial-gradient(900px 520px at 80% 30%, rgba(153,88,255,.22), transparent 55%),
                  linear-gradient(180deg, #0b0610, #12081b 55%, #09040e);
    }
    .intro-bg{
      position:absolute; inset:-40px;
      background:
        radial-gradient(circle at 20% 20%, rgba(255,84,160,.15), transparent 35%),
        radial-gradient(circle at 70% 30%, rgba(153,88,255,.12), transparent 40%),
        radial-gradient(circle at 50% 80%, rgba(255,255,255,.06), transparent 40%);
      filter: blur(10px);
      animation: slowFloat 10s ease-in-out infinite alternate;
    }
    @keyframes slowFloat{
      from{ transform: translate3d(-10px,-8px,0) scale(1.02); }
      to  { transform: translate3d(12px,10px,0) scale(1.05); }
    }
    .intro-content{
      position:relative;
      width:min(920px, 92vw);
      padding: 28px 26px 22px;
      border-radius: 26px;
      background: rgba(18,10,25,.45);
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: 0 30px 120px rgba(0,0,0,.55);
      backdrop-filter: blur(14px);
      transform: translateY(8px);
      animation: introPop .9s cubic-bezier(.2,.9,.2,1) both;
    }
    @keyframes introPop{
      0%{ opacity:0; transform: translateY(28px) scale(.98); }
      100%{ opacity:1; transform: translateY(0) scale(1); }
    }
    .intro-badge{
      display:inline-block;
      font-size: 12px;
      letter-spacing:.22em;
      text-transform:uppercase;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(255,84,160,.16);
      border: 1px solid rgba(255,84,160,.22);
      color: rgba(255,255,255,.85);
    }
    .intro-title{
      margin: 14px 0 8px;
      font-size: clamp(34px, 5vw, 64px);
      line-height: 1.04;
      color: rgba(255,255,255,.92);
      text-shadow: 0 10px 40px rgba(255,84,160,.18);
    }
    .intro-heart{
      display:inline-block;
      transform-origin:center;
      animation: heartBeat 1.2s ease-in-out infinite;
    }
    @keyframes heartBeat{
      0%,100%{ transform: scale(1); }
      35%{ transform: scale(1.15) rotate(-2deg); }
      70%{ transform: scale(1.03) rotate(2deg); }
    }
    .intro-subtitle{
      margin: 0 0 16px;
      font-size: 16px;
      color: rgba(255,255,255,.74);
      max-width: 62ch;
    }
    .intro-enter{
      display:inline-flex; align-items:center; gap:10px;
      padding: 12px 18px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,84,160,.90);
      color: rgba(255,255,255,.95);
      font-weight: 800;
      cursor:pointer;
      box-shadow: 0 18px 60px rgba(255,84,160,.24);
      transition: transform .15s ease, filter .15s ease;
    }
    .intro-enter:hover{ transform: translateY(-1px) scale(1.01); filter: brightness(1.02); }
    .intro-enter:active{ transform: translateY(1px) scale(.99); }
    .intro-hint{
      margin-top: 12px;
      font-size: 12px;
      color: rgba(255,255,255,.55);
    }
    .intro-fx span{
      position:absolute;
      bottom:-24px;
      font-size: 18px;
      opacity:.75;
      animation: floatUp linear forwards;
      filter: drop-shadow(0 10px 20px rgba(255,84,160,.18));
      pointer-events:none;
    }
    @keyframes floatUp{
      to{ transform: translateY(-120vh) translateX(var(--drift)); opacity:0; }
    }
    .intro-overlay.hide{
      animation: overlayOut .65s ease forwards;
    }
    @keyframes overlayOut{
      to{ opacity:0; transform: scale(1.01); pointer-events:none; }
    }

    /* ADD: Animated message (typewriter cursor + glow shimmer) */
    .animated-message{
      position:relative;
      animation: msgIn .9s ease both;
    }
    @keyframes msgIn{
      0%{ opacity:0; transform: translateY(10px); filter: blur(6px); }
      100%{ opacity:1; transform: translateY(0); filter: blur(0); }
    }
    .animated-message::after{
      content:"";
      position:absolute; inset:-10px;
      background: radial-gradient(circle at 30% 20%, rgba(255,84,160,.22), transparent 55%),
                  radial-gradient(circle at 70% 60%, rgba(153,88,255,.18), transparent 55%);
      filter: blur(14px);
      opacity:.85;
      z-index:-1;
      animation: glowMove 3.2s ease-in-out infinite alternate;
      pointer-events:none;
    }
    @keyframes glowMove{
      from{ transform: translate(-6px,-4px); }
      to{ transform: translate(6px,4px); }
    }
    .typewriter{
      display:inline;
      border-right: 2px solid rgba(255,255,255,.6);
      padding-right: 2px;
      animation: caret 1s steps(1) infinite;
    }
    @keyframes caret{ 50%{ border-right-color: transparent; } }

    /* Extra games visuals */
    .rt-box{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin-top: 10px; }
    .rt-status{ color: rgba(255,255,255,.75); font-weight:800; }
    .rt-start{
      padding: 10px 14px; border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(153,88,255,.18);
      color: rgba(255,255,255,.92);
      cursor:pointer; font-weight:800;
      transition: transform .12s ease, background .12s ease;
    }
    .rt-start:hover{ background: rgba(153,88,255,.24); transform: translateY(-1px); }
    .rt-heart{
      width: 66px; height: 50px;
      border-radius: 16px;
      border: 1px solid rgba(255,84,160,.25);
      background: rgba(255,84,160,.16);
      font-size: 20px;
      cursor:pointer;
      opacity: .9;
      transition: transform .12s ease, filter .12s ease;
      font-weight:900;
    }
    .rt-heart:enabled:hover{ transform: scale(1.06); filter: brightness(1.05); }
    .rt-score{ margin-top: 8px; color: rgba(255,255,255,.7); }

    .hunt-area{
      position:relative;
      height: 200px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      overflow:hidden;
      box-shadow: inset 0 0 40px rgba(0,0,0,.25);
    }
    .hunt-heart{
      position:absolute;
      border:none;
      width: 46px; height: 40px;
      border-radius: 14px;
      cursor:pointer;
      background: rgba(255,77,141,.22);
      border: 1px solid rgba(255,77,141,.28);
      font-size: 18px;
      font-weight: 900;
      color:#fff;
      box-shadow: 0 18px 40px rgba(255,77,141,.12);
      transition: transform .08s ease, filter .08s ease;
    }
    .hunt-heart:hover{ transform: scale(1.07); filter: brightness(1.08); }

    .footer{
      margin-top: 18px;
      text-align:center;
      color: rgba(255,255,255,.70);
      font-size:.95rem;
    }
    .footer b{ color:#fff; }
  </style>
</head>

<body>
  <canvas id="heartsCanvas"></canvas>
  <canvas id="confetti"></canvas>
  <div class="toast" id="toast"></div>

  <!-- Cover intro overlay -->
  <div id="introOverlay" class="intro-overlay" aria-hidden="false">
    <div class="intro-bg"></div>

    <div class="intro-content">
      <div class="intro-badge">for you</div>

      <h1 class="intro-title">
        Will you be my <span class="shine">Valentine</span>?
        <span class="intro-heart" aria-hidden="true">üíó</span>
      </h1>

      <p class="intro-subtitle" id="introSubtitle">
        I didn‚Äôt want to just text you‚Ä¶ I wanted to give you a whole little moment.
      </p>

      <button id="enterBtn" class="intro-enter">Tap to open ‚ú®</button>

      <div class="intro-hint">Best in full screen ‚Ä¢ tap anywhere to continue</div>
    </div>

    <div class="intro-fx" aria-hidden="true"></div>
  </div>

  <div class="wrap" id="wrap">
    <div class="topbar">
      <div class="pill"><span class="dot"></span> Our Little Valentine Page</div>
      <div class="mini" id="miniLine">Tap ‚ÄúSee our photos‚Äù and open memories full screen ‚ú®</div>
    </div>

    <div class="hero">
      <div class="card">
        <h1 class="heroTitle"><span class="shine">Will you be my Valentine?</span> ‚ù§Ô∏è</h1>

        <p class="desc" id="desc">
          I didn‚Äôt want a boring message. I wanted something that feels like us‚Äîsimple, sweet,
          and full of memories. So here it is‚Ä¶ a tiny page with a big question.
        </p>

        <div class="noZone">
          <button class="btn btnPrimary" id="yesBtn">Yes üíó</button>
          <button class="btn btnGhost" id="noBtn">No üôà</button>
          <button class="btn btnGhost" id="photosBtn">See our photos ‚Üì</button>
          <button class="btn btnGhost" id="gamesBtn">Play mini games üéÆ</button>
        </div>

        <div class="badgeRow" style="margin-top:14px;">
          <div class="badge" id="photoBadge">üì∏ 0 photos loaded</div>
          <div class="badge" id="sweetLine">üíå ‚ÄúI choose you. Again.‚Äù</div>
          <div class="badge" id="gameBadge">üé≤ 4 mini games</div>
        </div>
      </div>

      <div class="card sideCard">
        <p class="quote">
          ‚ÄúIf love had a face, it would look like the way you smile when you‚Äôre happy.‚Äù
          <small>‚Äî me, trying to be poetic</small>
        </p>

        <div class="badgeRow">
          <div class="badge">‚ú® Tap photos to zoom</div>
          <div class="badge">üéà Confetti on ‚ÄúYes‚Äù</div>
          <div class="badge">üß† Memory + Quiz + More</div>
        </div>

        <p class="sub" style="margin:8px 0 0;">
          I added a few tiny games because you make life feel playful.
          Sometimes‚Ä¶ little surprises pop up while you play.
        </p>

        <div class="row">
          <button class="btn btnGhost" id="secretBtn">Unlock secret üíå</button>
          <span class="tiny" id="secretHint">Win a game first.</span>
        </div>
      </div>
    </div>

    <!-- PHOTOS -->
    <div class="sectionTitle" id="photos">
      <div>Our Photos ‚ú®</div>
      <div class="hint">Tap any photo to open ‚Ä¢ ESC to close</div>
    </div>

    <div class="galleryWrap">
      <div class="gallery" id="gallery"></div>
    </div>

    <!-- GAMES -->
    <div class="sectionTitle" id="games">
      <div>Mini Games üéÆ</div>
      <div class="hint">Tiny, cute, and actually works.</div>
    </div>

    <div class="grid2">
      <!-- Memory game -->
      <div class="card">
        <div class="gameTitle">
          <span>Memory Match üß†</span>
          <span class="hint" id="memStatus">Matches: 0</span>
        </div>
        <p class="sub">Find all matching pairs. When you finish, you unlock a sweet surprise.</p>
        <div class="memoryGrid" id="memoryGrid"></div>
        <div class="row">
          <button class="btn btnGhost" id="memReset">Reset</button>
          <span class="tiny" id="memTip">Tip: it‚Äôs quick üòÑ</span>
        </div>
      </div>

      <!-- Quiz -->
      <div class="card">
        <div class="gameTitle">
          <span>Quick Love Quiz üíò</span>
          <span class="hint" id="quizStatus">Score: 0</span>
        </div>
        <p class="sub">Answer these little questions. Get 2/2 and you unlock the secret.</p>
        <div class="qBox">
          <div class="qQuestion" id="qText">Loading‚Ä¶</div>
          <div class="qOptions" id="qOptions"></div>
          <div class="row">
            <button class="btn btnGhost" id="quizNext">Next</button>
            <button class="btn btnGhost" id="quizRestart">Restart</button>
          </div>
        </div>
      </div>

      <!-- Reaction Tap -->
      <div class="card">
        <div class="gameTitle">
          <span>Reaction Tap ‚ö°</span>
          <span class="hint" id="rtBest">Best: ‚Äî</span>
        </div>
        <p class="sub">Tap the heart the moment it appears. Faster = better.</p>
        <div class="rt-box">
          <div class="rt-status" id="rtStatus">Press Start</div>
          <button class="rt-start" id="rtStart">Start</button>
          <button class="rt-heart" id="rtHeart" disabled>üíó</button>
        </div>
        <div class="rt-score" id="rtScore"></div>
      </div>

      <!-- Heart Hunt -->
      <div class="card">
        <div class="gameTitle">
          <span>Heart Hunt üíû</span>
          <span class="hint" id="huntStatus">Score: 0</span>
        </div>
        <p class="sub">Catch 6 hearts before the timer ends. Each catch might trigger a surprise.</p>
        <div class="hunt-area" id="huntArea"></div>
        <div class="row">
          <button class="btn btnGhost" id="huntStart">Start</button>
          <span class="tiny" id="huntTimer">Time: ‚Äî</span>
        </div>
      </div>
    </div>

    <div class="footer">
      Made with ‚ù§Ô∏è by <b>you</b> (and a little extra magic).
    </div>
  </div>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox">
    <div class="lbCard">
      <img class="lbImg" id="lbImg" alt="photo" />
      <div class="lbBar">
        <div id="lbLabel">Photo</div>
        <div class="lbBtns">
          <button class="iconBtn" id="prevBtn">‚Üê</button>
          <button class="iconBtn" id="nextBtn">‚Üí</button>
          <button class="iconBtn" id="closeBtn">Close</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    /***********************
     * UTIL
     ***********************/
    const $ = (s) => document.querySelector(s);

    function clamp(n, a, b){ return Math.max(a, Math.min(b, n)); }
    function shuffle(arr){
      for(let i = arr.length-1; i>0; i--){
        const j = Math.floor(Math.random()*(i+1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    /***********************
     * TOAST (single, safe, animated)
     ***********************/
    const toastEl = document.getElementById("toast");
    let toastTimer = null;
    function toast(msg){
      toastEl.textContent = msg;
      toastEl.classList.add("show");
      toastEl.animate(
        [
          { transform: "translateX(-50%) translateY(10px) scale(0.98)" },
          { transform: "translateX(-50%) translateY(0px) scale(1.03)" },
          { transform: "translateX(-50%) translateY(0px) scale(1.00)" }
        ],
        { duration: 320, easing: "cubic-bezier(.2,.9,.2,1)" }
      );

      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=> toastEl.classList.remove("show"), 2600);
    }

    /***********************
     * CONFETTI
     ***********************/
    const confettiCanvas = document.getElementById("confetti");
    const cctx = confettiCanvas.getContext("2d");

    function resizeConfetti(){
      confettiCanvas.width = window.innerWidth;
      confettiCanvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resizeConfetti);
    resizeConfetti();

    function launchConfetti(){
      confettiCanvas.classList.add("show");
      const pieces = Array.from({length: 180}, () => ({
        x: Math.random()*confettiCanvas.width,
        y: -20 - Math.random()*300,
        r: 4 + Math.random()*6,
        vx: -2 + Math.random()*4,
        vy: 3 + Math.random()*5,
        rot: Math.random()*Math.PI,
        vr: -0.2 + Math.random()*0.4
      }));

      const start = performance.now();
      function tick(t){
        const elapsed = t - start;
        cctx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);

        pieces.forEach(p=>{
          p.x += p.vx;
          p.y += p.vy;
          p.rot += p.vr;

          cctx.save();
          cctx.translate(p.x, p.y);
          cctx.rotate(p.rot);

          const hue = (p.x / confettiCanvas.width) * 360;
          cctx.fillStyle = `hsla(${hue}, 90%, 65%, .95)`;
          cctx.fillRect(-p.r, -p.r, p.r*2, p.r*2);
          cctx.restore();
        });

        if(elapsed < 2400) requestAnimationFrame(tick);
        else{
          cctx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
          confettiCanvas.classList.remove("show");
        }
      }
      requestAnimationFrame(tick);
    }

    /***********************
     * SECRETS (10 unique, never repeat until all shown once)
     ***********************/
    const SECRET_KEY = "valentine_secrets_shown_v2";
    const ALL_SECRETS = [
      "üíå Secret: I like you in the calm moments‚Ä¶ and I love you in the chaotic ones.",
      "üíå Secret: You‚Äôre my favorite notification, honestly.",
      "üíå Secret: If I could pause time, I‚Äôd pause it when you‚Äôre smiling.",
      "üíå Secret: I act normal, but I miss you more than I say.",
      "üíå Secret: You make boring days feel soft and warm.",
      "üíå Secret: I don‚Äôt just want you in my life‚Ä¶ I want you in my future.",
      "üíå Secret: You‚Äôre the ‚Äòhome‚Äô feeling I didn‚Äôt know I needed.",
      "üíå Secret: I choose you‚Ä¶ not once. Repeatedly.",
      "üíå Secret: I‚Äôd still pick you in every timeline.",
      "üíå Secret: If love is a habit, I‚Äôm addicted to you."
    ];

    function loadShownSecrets(){
      try{
        const raw = localStorage.getItem(SECRET_KEY);
        const arr = raw ? JSON.parse(raw) : [];
        return new Set(Array.isArray(arr) ? arr : []);
      }catch{
        return new Set();
      }
    }
    function saveShownSecrets(set){
      try{ localStorage.setItem(SECRET_KEY, JSON.stringify([...set])); }catch{}
    }

    let shownSecrets = loadShownSecrets();

    function remainingSecrets(){
      return ALL_SECRETS.filter(s => !shownSecrets.has(s));
    }

    function popSecret(){
      const remaining = remainingSecrets();
      if(remaining.length === 0){
        toast("üíó You found all the little secrets. Now you‚Äôre just showing off.");
        document.getElementById("miniLine").textContent = "All secrets found üíó (okay‚Ä¶ that‚Äôs cute).";
        return;
      }
      const pick = remaining[Math.floor(Math.random() * remaining.length)];
      shownSecrets.add(pick);
      saveShownSecrets(shownSecrets);
      toast(pick);

      const miniLine = document.getElementById("miniLine");
      miniLine.textContent = "A secret appeared‚Ä¶ üíå";

      if(Math.random() < 0.35) launchConfetti();
    }

    // chance-based secret pop
    function maybePopSecret(reason){
      const chance = (reason === "win") ? 0.85
                   : (reason === "game") ? 0.30
                   : (reason === "yes") ? 0.25
                   : (reason === "no") ? 0.12
                   : 0.10;
      if(Math.random() < chance) popSecret();
    }

    /***********************
     * INTRO OVERLAY
     ***********************/
    const overlay = document.getElementById("introOverlay");
    const wrap = document.getElementById("wrap");
    wrap.style.visibility = "hidden";

    function spawnOverlayEmoji(){
      const fx = overlay.querySelector(".intro-fx");
      const s = document.createElement("span");
      const hearts = ["üíó","üíñ","üíï","üíû","üíò","‚ú®"];
      s.textContent = hearts[Math.floor(Math.random()*hearts.length)];
      s.style.left = Math.random() * 100 + "vw";
      s.style.setProperty("--drift", (Math.random()*160 - 80) + "px");
      s.style.animationDuration = (4 + Math.random()*3) + "s";
      s.style.fontSize = (14 + Math.random()*16) + "px";
      fx.appendChild(s);
      setTimeout(() => s.remove(), 8000);
    }
    const overlayTimer = setInterval(spawnOverlayEmoji, 240);

    function enterSite(){
      clearInterval(overlayTimer);
      overlay.classList.add("hide");
      setTimeout(() => {
        overlay.style.display = "none";
        wrap.style.visibility = "visible";
        startMessageAnimation();
      }, 650);
    }

    document.getElementById("enterBtn").addEventListener("click", (e)=>{
      e.stopPropagation();
      enterSite();
    });
    overlay.addEventListener("click", (e)=>{
      if(e.target.id === "enterBtn") return;
      enterSite();
    });

    /***********************
     * ANIMATED MAIN MESSAGE
     ***********************/
    function typewriter(el, speed){
      if(!el) return;
      const full = el.textContent.trim();
      el.textContent = "";
      el.classList.add("animated-message");
      const span = document.createElement("span");
      span.className = "typewriter";
      el.appendChild(span);

      let i = 0;
      const t = setInterval(() => {
        span.textContent += full[i] || "";
        i++;
        if(i >= full.length){
          clearInterval(t);
          el.textContent = full;
          el.classList.add("animated-message");
        }
      }, speed);
    }

    function startMessageAnimation(){
      const msg = document.getElementById("desc");
      typewriter(msg, 15);

      // subtle shimmer pulse every few seconds (keeps it alive)
      setInterval(() => {
        if(document.hidden) return;
        msg.classList.add("animated-message");
        setTimeout(() => msg.classList.remove("animated-message"), 1200);
      }, 9000);
    }

    /***********************
     * PHOTOS
     ***********************/
    const photoFiles = [
      "Snapchat-504182231.jpg",
      "Snapchat-1116768867.jpg",
      "Snapchat-1166505997.jpg",
      "Snapchat-2122437627.jpg",
      "Snapchat-1047984260.jpg",
      "Snapchat-3301345.jpg"
    ];

    const galleryEl = document.getElementById("gallery");
    const photoBadge = document.getElementById("photoBadge");
    photoBadge.textContent = `üì∏ ${photoFiles.length} photos loaded`;

    photoFiles.forEach((src, i) => {
      const img = document.createElement("img");
      img.src = src;
      img.className = "photo";
      img.loading = "lazy";
      img.alt = `Photo ${i+1}`;
      img.addEventListener("click", () => openLightbox(i));
      galleryEl.appendChild(img);
    });

    /***********************
     * LIGHTBOX
     ***********************/
    const lightbox = document.getElementById("lightbox");
    const lbImg = document.getElementById("lbImg");
    const lbLabel = document.getElementById("lbLabel");
    const closeBtn = document.getElementById("closeBtn");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");
    let currentIndex = 0;

    function openLightbox(index){
      currentIndex = index;
      lbImg.src = photoFiles[currentIndex];
      lbLabel.textContent = `Photo ${currentIndex+1} / ${photoFiles.length}`;
      lightbox.classList.add("open");
    }
    function closeLightbox(){
      lightbox.classList.remove("open");
      lbImg.src = "";
    }
    function prevPhoto(){
      currentIndex = (currentIndex - 1 + photoFiles.length) % photoFiles.length;
      openLightbox(currentIndex);
    }
    function nextPhoto(){
      currentIndex = (currentIndex + 1) % photoFiles.length;
      openLightbox(currentIndex);
    }

    closeBtn.addEventListener("click", closeLightbox);
    prevBtn.addEventListener("click", prevPhoto);
    nextBtn.addEventListener("click", nextPhoto);
    lightbox.addEventListener("click", (e)=>{ if(e.target === lightbox) closeLightbox(); });
    window.addEventListener("keydown", (e)=>{
      if(!lightbox.classList.contains("open")) return;
      if(e.key === "Escape") closeLightbox();
      if(e.key === "ArrowLeft") prevPhoto();
      if(e.key === "ArrowRight") nextPhoto();
    });

    /***********************
     * BUTTONS
     ***********************/
    const photosBtn = document.getElementById("photosBtn");
    const gamesBtn = document.getElementById("gamesBtn");
    photosBtn.addEventListener("click", ()=> document.getElementById("photos").scrollIntoView({behavior:"smooth"}));
    gamesBtn.addEventListener("click", ()=> document.getElementById("games").scrollIntoView({behavior:"smooth"}));

    const miniLine = document.getElementById("miniLine");
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");

    yesBtn.addEventListener("click", ()=>{
      miniLine.textContent = "Okay‚Ä¶ my heart is doing backflips right now ‚ù§Ô∏è";
      launchConfetti();
      toast("YAYYY üíó Now scroll‚Ä¶ I added games too üòÑ");
      maybePopSecret("yes");
    });

    noBtn.addEventListener("mouseenter", ()=>{
      const x = Math.random()*240 - 120;
      const y = Math.random()*120 - 60;
      noBtn.style.transform = `translate(${x}px, ${y}px)`;
    });
    noBtn.addEventListener("click", ()=>{
      noBtn.style.transform = `translate(0px,0px)`;
      toast("Nice try üôà press YES properly üò≠");
      maybePopSecret("no");
    });

    /***********************
     * SECRET BUTTON (requires a win)
     ***********************/
    const secretBtn = document.getElementById("secretBtn");
    const secretHint = document.getElementById("secretHint");
    let anyWin = false;

    function updateSecretHint(){
      secretHint.textContent = anyWin ? "Unlocked ‚úÖ tap it!" : "Win a game first.";
    }
    updateSecretHint();

    secretBtn.addEventListener("click", ()=>{
      if(anyWin) popSecret();
      else toast("Win a game first üòÑ Try Memory Match, Quiz, Reaction Tap, or Heart Hunt!");
    });

    /***********************
     * GAME 1: Memory Match
     ***********************/
    const memoryGrid = document.getElementById("memoryGrid");
    const memStatus = document.getElementById("memStatus");
    const memReset = document.getElementById("memReset");

    const emojisBase = ["üíó","‚ú®","üç´","üåπ","ü´∂","üéÄ"]; // 6 pairs => 12
    let firstPick = null;
    let lock = false;
    let matches = 0;

    function setupMemory(){
      memoryGrid.innerHTML = "";
      firstPick = null;
      lock = false;
      matches = 0;
      memStatus.textContent = `Matches: ${matches}`;

      const vals = shuffle([...emojisBase, ...emojisBase]);
      vals.forEach((val, id)=>{
        const el = document.createElement("div");
        el.className = "mCard";
        el.dataset.id = String(id);
        el.innerHTML = `<span>${val}</span>`;
        el.addEventListener("click", ()=> onMemoryClick(el, val));
        memoryGrid.appendChild(el);
      });
    }

    function onMemoryClick(el, val){
      if(lock) return;
      if(el.classList.contains("matched") || el.classList.contains("revealed")) return;

      el.classList.add("revealed");

      if(!firstPick){
        firstPick = { el, val };
        return;
      }

      if(firstPick.val === val){
        el.classList.remove("revealed");
        firstPick.el.classList.remove("revealed");
        el.classList.add("matched");
        firstPick.el.classList.add("matched");
        firstPick = null;

        matches++;
        memStatus.textContent = `Matches: ${matches}`;
        maybePopSecret("game");

        if(matches === emojisBase.length){
          anyWin = true;
          updateSecretHint();
          toast("You won Memory Match! üíó Secret unlocked!");
          miniLine.textContent = "Memory win üß†‚ú® ‚Äî tap ‚ÄòUnlock secret‚Äô üíå";
          launchConfetti();
          maybePopSecret("win");
        }
      } else {
        lock = true;
        const prev = firstPick.el;
        firstPick = null;
        setTimeout(()=>{
          el.classList.remove("revealed");
          prev.classList.remove("revealed");
          lock = false;
        }, 550);
      }
    }

    memReset.addEventListener("click", ()=>{
      setupMemory();
      toast("Memory game reset üîÅ");
    });

    setupMemory();

    /***********************
     * GAME 2: Quiz
     ***********************/
    const qText = document.getElementById("qText");
    const qOptions = document.getElementById("qOptions");
    const quizNext = document.getElementById("quizNext");
    const quizRestart = document.getElementById("quizRestart");
    const quizStatus = document.getElementById("quizStatus");

    const quiz = [
      { q: "This page is made with‚Ä¶", options: ["Love ‚ù§Ô∏è", "Luck üçÄ", "Boredom üò¥", "Nothing üò∂"], correct: 0 },
      { q: "When you smile, my mood goes‚Ä¶", options: ["Up üìà", "Down üìâ", "Offline üì¥", "Confused ü§î"], correct: 0 }
    ];

    let qi = 0;
    let score = 0;
    let answered = false;

    function renderQuiz(){
      answered = false;
      qText.textContent = quiz[qi].q;
      qOptions.innerHTML = "";
      quiz[qi].options.forEach((text, idx)=>{
        const b = document.createElement("button");
        b.className = "opt";
        b.textContent = text;
        b.addEventListener("click", ()=> pickOption(b, idx));
        qOptions.appendChild(b);
      });
      quizStatus.textContent = `Score: ${score}`;
    }

    function pickOption(btn, idx){
      if(answered) return;
      answered = true;

      const correct = quiz[qi].correct;
      const opts = [...qOptions.querySelectorAll(".opt")];
      opts.forEach((o, i)=>{ if(i === correct) o.classList.add("correct"); });

      if(idx === correct){
        score++;
        quizStatus.textContent = `Score: ${score}`;
        toast("Correct üíó");
        maybePopSecret("game");
      } else {
        btn.classList.add("wrong");
        toast("Aww wrong üòÑ try again");
      }

      if(score === quiz.length){
        anyWin = true;
        updateSecretHint();
        miniLine.textContent = "Quiz perfect score üíò ‚Äî secret unlocked!";
        toast("You got 2/2! Secret unlocked üíå");
        launchConfetti();
        maybePopSecret("win");
      }
    }

    quizNext.addEventListener("click", ()=>{
      qi = (qi + 1) % quiz.length;
      renderQuiz();
    });

    quizRestart.addEventListener("click", ()=>{
      qi = 0;
      score = 0;
      renderQuiz();
      toast("Quiz restarted üîÅ");
    });

    renderQuiz();

    /***********************
     * GAME 3: Reaction Tap
     ***********************/
    const rtStart = document.getElementById("rtStart");
    const rtHeart = document.getElementById("rtHeart");
    const rtStatus = document.getElementById("rtStatus");
    const rtScore = document.getElementById("rtScore");
    const rtBestEl = document.getElementById("rtBest");
    const BEST_KEY = "valentine_reaction_best_v2";

    let best = null;
    try{
      const raw = localStorage.getItem(BEST_KEY);
      best = raw ? Number(raw) : null;
      if(best && Number.isFinite(best)) rtBestEl.textContent = `Best: ${best}ms`;
    }catch{}

    let armed = false;
    let startTime = 0;
    let rtTimer = null;

    function rtReset(){
      rtHeart.disabled = true;
      rtStatus.textContent = "Get ready‚Ä¶";
      rtScore.textContent = "";
      armed = false;
    }

    rtStart.addEventListener("click", ()=>{
      rtReset();
      const delay = 900 + Math.random()*2400;
      clearTimeout(rtTimer);
      rtTimer = setTimeout(()=>{
        rtHeart.disabled = false;
        rtStatus.textContent = "NOW!";
        startTime = performance.now();
        armed = true;
      }, delay);
    });

    rtHeart.addEventListener("click", ()=>{
      if(!armed || rtHeart.disabled) return;
      const ms = Math.round(performance.now() - startTime);
      rtHeart.disabled = true;
      armed = false;

      let vibe = "Okay üò≥";
      if(ms < 220) vibe = "INSANE üíò";
      else if(ms < 320) vibe = "Fast üíñ";
      else if(ms < 450) vibe = "Nice üíó";

      rtStatus.textContent = `Time: ${ms}ms`;
      rtScore.textContent = `Vibe: ${vibe} ‚Ä¢ Try again for a better score!`;

      if(best === null || ms < best){
        best = ms;
        rtBestEl.textContent = `Best: ${best}ms`;
        try{ localStorage.setItem(BEST_KEY, String(best)); }catch{}
        toast("New best üò≠üíó");
        anyWin = true;
        updateSecretHint();
        maybePopSecret("win");
      } else {
        maybePopSecret("game");
      }
    });

    /***********************
     * GAME 4: Heart Hunt
     ***********************/
    const huntArea = document.getElementById("huntArea");
    const huntStart = document.getElementById("huntStart");
    const huntStatus = document.getElementById("huntStatus");
    const huntTimer = document.getElementById("huntTimer");

    let huntScore = 0;
    let huntTime = 0;
    let huntRunning = false;
    let huntTick = null;
    let huntSpawn = null;

    function clearHuntHearts(){
      huntArea.querySelectorAll(".hunt-heart").forEach(b => b.remove());
    }

    function setHuntUI(){
      huntStatus.textContent = `Score: ${huntScore}`;
      huntTimer.textContent = huntRunning ? `Time: ${huntTime}s` : `Time: ‚Äî`;
    }

    function spawnHuntHeart(){
      if(!huntRunning) return;
      if(huntArea.querySelectorAll(".hunt-heart").length >= 5) return;

      const b = document.createElement("button");
      b.type = "button";
      b.className = "hunt-heart";
      b.textContent = ["üíó","üíñ","üíû","üíò","üíï"][Math.floor(Math.random()*5)];

      const pad = 10;
      const w = huntArea.clientWidth;
      const h = huntArea.clientHeight;
      const x = Math.floor(Math.random() * Math.max(1, (w - 60 - pad))) + pad;
      const y = Math.floor(Math.random() * Math.max(1, (h - 54 - pad))) + pad;
      b.style.left = x + "px";
      b.style.top = y + "px";

      b.animate(
        [
          { transform: "scale(0.7)", opacity: 0.0 },
          { transform: "scale(1.1)", opacity: 1.0 },
          { transform: "scale(1.0)", opacity: 1.0 }
        ],
        { duration: 220, easing: "cubic-bezier(.2,.9,.2,1)" }
      );

      const life = 900 + Math.random()*700;
      const kill = setTimeout(() => b.remove(), life);

      b.addEventListener("click", ()=>{
        clearTimeout(kill);
        b.remove();
        huntScore++;
        setHuntUI();
        toast("Caught üíó");
        maybePopSecret("game");
        if(Math.random() < 0.16) launchConfetti();

        if(huntScore >= 6){
          // win
          huntRunning = false;
          clearInterval(huntTick);
          clearInterval(huntSpawn);
          clearHuntHearts();
          setHuntUI();

          anyWin = true;
          updateSecretHint();
          toast("Heart Hunt win! üíû Secret unlocked.");
          miniLine.textContent = "Heart Hunt win üíû ‚Äî you‚Äôre too fast.";
          launchConfetti();
          maybePopSecret("win");
        }
      });

      huntArea.appendChild(b);
    }

    function startHunt(){
      clearHuntHearts();
      huntScore = 0;
      huntTime = 18;
      huntRunning = true;
      setHuntUI();
      toast("Go! Catch the hearts üíó");

      clearInterval(huntTick);
      clearInterval(huntSpawn);

      huntTick = setInterval(()=>{
        huntTime--;
        setHuntUI();
        if(huntTime <= 0){
          huntRunning = false;
          clearInterval(huntTick);
          clearInterval(huntSpawn);
          clearHuntHearts();
          setHuntUI();
          toast("Time‚Äôs up üò≠ Try again!");
          miniLine.textContent = "Try Heart Hunt again‚Ä¶ I believe in you üíó";
        }
      }, 1000);

      huntSpawn = setInterval(()=>{
        spawnHuntHeart();
      }, 260 + Math.floor(Math.random()*120));
    }

    huntStart.addEventListener("click", startHunt);
    setHuntUI();

    /***********************
     * HEARTS BACKGROUND
     ***********************/
    const heartsCanvas = document.getElementById("heartsCanvas");
    const hctx = heartsCanvas.getContext("2d");

    function resizeHearts(){
      heartsCanvas.width = window.innerWidth;
      heartsCanvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resizeHearts);
    resizeHearts();

    const hearts = Array.from({ length: 46 }, () => makeHeart());
    function makeHeart(){
      return {
        x: Math.random()*heartsCanvas.width,
        y: heartsCanvas.height + Math.random()*heartsCanvas.height,
        s: 8 + Math.random()*16,
        vy: 0.6 + Math.random()*1.4,
        vx: -0.35 + Math.random()*0.7,
        a: 0.25 + Math.random()*0.35,
        w: 0.6 + Math.random()*1.1
      };
    }
    function drawHeart(x,y,size,alpha){
      hctx.save();
      hctx.translate(x,y);
      hctx.scale(size/18, size/18);
      hctx.globalAlpha = alpha;
      const grd = hctx.createLinearGradient(-10,-10, 10, 10);
      grd.addColorStop(0, "rgba(255,77,141,1)");
      grd.addColorStop(1, "rgba(255,143,182,1)");
      hctx.fillStyle = grd;

      hctx.beginPath();
      hctx.moveTo(0, 6);
      hctx.bezierCurveTo(0, -6, -14, -6, -14, 6);
      hctx.bezierCurveTo(-14, 18, 0, 22, 0, 30);
      hctx.bezierCurveTo(0, 22, 14, 18, 14, 6);
      hctx.bezierCurveTo(14, -6, 0, -6, 0, 6);
      hctx.closePath();
      hctx.fill();
      hctx.restore();
    }
    function animateHearts(){
      hctx.clearRect(0,0,heartsCanvas.width, heartsCanvas.height);
      hearts.forEach((p,i)=>{
        p.y -= p.vy;
        p.x += Math.sin(p.y*0.01) * p.w + p.vx;
        drawHeart(p.x, p.y, p.s, p.a);
        if(p.y < -40){
          hearts[i] = makeHeart();
          hearts[i].y = heartsCanvas.height + 40;
        }
      });
      requestAnimationFrame(animateHearts);
    }
    animateHearts();
  </script>
</body>
</html>
